<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿å¬¤å¥åº·ç®¡ç†æ—¥æ›† | Grandma's Healthcare Calendar</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-secondary:hover {
            background: #4a5568;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .calendar-day {
            background: white;
            border-radius: 10px;
            padding: 15px;
            min-height: 200px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .calendar-day:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .day-header {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .add-event-btn {
            background: #48bb78;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-event-btn:hover {
            background: #38a169;
        }

        .event {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .event:hover {
            background: #edf2f7;
            transform: translateX(3px);
        }

        .event-dietary { border-left-color: #48bb78; }
        .event-medication { border-left-color: #ed8936; }
        .event-checkup { border-left-color: #4299e1; }
        .event-surgery { border-left-color: #f56565; }
        .event-hospitalization { border-left-color: #9f7aea; }
        .event-clinic { border-left-color: #38b2ac; }

        .event-type {
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            color: #718096;
            margin-bottom: 3px;
        }

        .event-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .event-time {
            font-size: 0.85em;
            color: #718096;
        }

        .companion-badge {
            display: inline-block;
            background: #bee3f8;
            color: #2c5282;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75em;
            margin-top: 5px;
        }

        .unassigned {
            background: #fed7d7;
            color: #9b2c2c;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .modal-header h2 {
            color: #667eea;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #718096;
        }

        .close-btn:hover {
            color: #2d3748;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .doctor-schedule {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        .doctor-schedule h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .schedule-grid {
            display: grid;
            grid-template-columns: auto repeat(7, 1fr);
            gap: 1px;
            background: #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .schedule-cell {
            background: white;
            padding: 12px;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .schedule-header {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .schedule-time {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }

        .doctor-name {
            cursor: pointer;
            transition: all 0.2s;
        }

        .doctor-name:hover {
            background: #edf2f7;
        }

        @media (max-width: 1200px) {
            .calendar-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .calendar-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .schedule-grid {
                font-size: 0.85em;
            }
        }

        @media (max-width: 480px) {
            .calendar-grid {
                grid-template-columns: 1fr;
            }
        }

        .event-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e2e8f0;
        }

        .detail-section {
            margin-bottom: 15px;
        }

        .detail-section h4 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .detail-content {
            background: #f7fafc;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .info-banner {
            background: #bee3f8;
            color: #2c5282;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4299e1;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const EVENT_TYPES = {
            dietary: { label: 'é£²é£Ÿ', color: '#48bb78' },
            medication: { label: 'ç”¨è—¥', color: '#ed8936' },
            checkup: { label: 'æª¢æŸ¥', color: '#4299e1' },
            surgery: { label: 'æ‰‹è¡“', color: '#f56565' },
            hospitalization: { label: 'ä½é™¢', color: '#9f7aea' },
            clinic: { label: 'é–€è¨º', color: '#38b2ac' }
        };

        const initialEvents = [
            {
                id: 1,
                date: '2025-11-03',
                type: 'dietary',
                title: 'ä½ç¤¦é£²é£Ÿ',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 2,
                date: '2025-11-10',
                type: 'dietary',
                title: 'ä½ç¤¦é£²é£Ÿ',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 3,
                date: '2025-11-10',
                type: 'medication',
                title: 'åœç”²äº¢è—¥ç‰©',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 4,
                date: '2025-11-11',
                type: 'dietary',
                title: '7:30å‰åƒå®Œæ—©é¤ï¼Œä¹‹å¾Œç¦é£Ÿåˆ°2:00ï¼ˆå¯å–æ°´åƒè—¥ï¼‰',
                time: '07:30',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 5,
                date: '2025-11-11',
                type: 'medication',
                title: 'åœç”²äº¢è—¥ç‰©',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 6,
                date: '2025-11-11',
                type: 'checkup',
                title: 'ç”²ç‹€è…ºè¶…éŸ³æ³¢ (1F)',
                time: '09:30',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 7,
                date: '2025-11-11',
                type: 'checkup',
                title: 'è…åŠŸèƒ½æª¢æŸ¥ (B1) + ç”²ç‹€è…ºæ ¸å­æ”å½±å–è—¥åŠ‘æº–å‚™ (B1)',
                time: '10:30',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 8,
                date: '2025-11-12',
                type: 'dietary',
                title: 'ä½ç¤¦é£²é£Ÿï¼ˆåˆ°æª¢æŸ¥å‰ï¼‰',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 9,
                date: '2025-11-12',
                type: 'medication',
                title: 'åœç”²äº¢è—¥ç‰©ï¼ˆåˆ°æª¢æŸ¥å‰ï¼‰',
                time: '',
                companion: '',
                notes: '',
                cautions: '',
                reference: ''
            },
            {
                id: 10,
                date: '2025-11-12',
                type: 'checkup',
                title: '10:30ç”²ç‹€è…ºæ ¸å­æ”å½±(B1) - åˆ¤æ–·è—¥ç‰©ä½¿ç”¨',
                time: '10:30',
                companion: '',
                notes: 'é†«ç”Ÿåˆ¤æ–·æ‡‰æ˜¯åŸç™¼æœ€ç«¯å…ç–«ç–¾ç—…æˆ–æ˜¯ç”²ç‹€è…ºæ¯’ç—‡',
                cautions: '',
                reference: ''
            },
            {
                id: 11,
                date: '2025-11-17',
                type: 'clinic',
                title: 'å³å˜‰å®‰é–€è¨º 11:00å‰å ±åˆ°64è™Ÿ',
                time: '11:00',
                companion: '',
                notes: 'ä¸»è¦ç¢ºèªç”²ç‹€è…ºè—¥ç‰©æœ‰ç„¡å‰¯ä½œç”¨ + èª¿æ•´ç”²ç‹€è…ºè—¥ï¼Œå‘ŠçŸ¥è¦æŠ½è¡€',
                cautions: 'å¦‚æœå³é†«å¸«è¦ºå¾—é‚„æœ‰ä¹…ç”²ç‹€è…ºæ‰èƒ½æ§åˆ¶ï¼Œå°±åˆ°åˆå¿ƒæ¨“7å¥æ‰¾æ–¹å°ˆå¸«è¨è«–æ‰‹è¡“å®‰æ’æ™‚é–“',
                reference: ''
            },
            {
                id: 12,
                date: '2025-11-24',
                type: 'surgery',
                title: 'æš«å®šæ‰‹è¡“æ™‚é–“',
                time: '',
                companion: '',
                notes: '',
                cautions: 'ä¸€å®šè¦å¸¶åŒæ„æ›¸ï¼ˆé†«ç”Ÿæœ‰è“‹ç« åœ–çš„ï¼‰',
                reference: ''
            },
            {
                id: 13,
                date: '2025-11-25',
                type: 'checkup',
                title: '15:30ç”²ç‹€è…ºç©¿åˆº (1F)',
                time: '15:30',
                companion: '',
                notes: '',
                cautions: 'ä¸€å®šè¦å¸¶åŒæ„æ›¸ï¼ˆé†«ç”Ÿæœ‰è“‹ç« åœ–çš„ï¼‰',
                reference: ''
            },
            {
                id: 14,
                date: '2025-12-01',
                type: 'hospitalization',
                title: 'æœ±æ–°å‡± ç´„14:00å ±åˆ° 31è™Ÿ',
                time: '14:00',
                companion: '',
                notes: 'å†æ¬¡ç¢ºèªå¿ƒè‡Ÿå¯ä»¥é–‹åˆ€ï¼Œ[?]æ‡‰è©²å¯ä»¥é—œå±±å›è¨º?',
                cautions: '',
                reference: ''
            }
        ];

        const initialDoctorSchedule = {
            morning: {
                mon: ['ææ”¿éœ–', 'å³å˜‰å®‰'],
                tue: ['æ±Ÿå…ƒå®', 'æœ±æ–°å‡±ï¼ˆç‰é‡Œï¼‰'],
                wed: ['ææ”¿éœ–', 'å³å˜‰å®‰', 'æœ±æ–°å‡±'],
                thu: ['å³å˜‰å®‰', 'æœ±æ–°å‡±ï¼ˆé—œå±±ï¼‰'],
                fri: ['ææ”¿éœ–'],
                sat: [],
                sun: []
            },
            afternoon: {
                mon: ['æœ±æ–°å‡±'],
                tue: ['ææ”¿éœ–ï¼ˆç‰é‡Œï¼‰', 'å³å˜‰å®‰'],
                wed: [],
                thu: ['æ±Ÿå…ƒå®'],
                fri: ['æ±Ÿå…ƒå®'],
                sat: [],
                sun: []
            }
        };

        function App() {
            const [events, setEvents] = useState(initialEvents);
            const [doctorSchedule, setDoctorSchedule] = useState(initialDoctorSchedule);
            const [showModal, setShowModal] = useState(false);
            const [editingEvent, setEditingEvent] = useState(null);
            const [selectedDate, setSelectedDate] = useState('');
            const [currentMonth, setCurrentMonth] = useState('2025-11');

            const getDaysInMonth = (yearMonth) => {
                const [year, month] = yearMonth.split('-');
                const daysInMonth = new Date(year, month, 0).getDate();
                const days = [];
                for (let i = 1; i <= daysInMonth; i++) {
                    days.push(`${yearMonth}-${String(i).padStart(2, '0')}`);
                }
                return days;
            };

            const getEventsForDate = (date) => {
                return events.filter(e => e.date === date);
            };

            const openModal = (date, event = null) => {
                setSelectedDate(date);
                if (event) {
                    setEditingEvent(event);
                } else {
                    setEditingEvent({
                        date: date,
                        type: 'dietary',
                        title: '',
                        time: '',
                        companion: '',
                        notes: '',
                        cautions: '',
                        reference: ''
                    });
                }
                setShowModal(true);
            };

            const closeModal = () => {
                setShowModal(false);
                setEditingEvent(null);
                setSelectedDate('');
            };

            const saveEvent = () => {
                if (editingEvent.id) {
                    setEvents(events.map(e => e.id === editingEvent.id ? editingEvent : e));
                } else {
                    setEvents([...events, { ...editingEvent, id: Date.now() }]);
                }
                closeModal();
            };

            const deleteEvent = (id) => {
                if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤äº‹ä»¶å—ï¼Ÿ')) {
                    setEvents(events.filter(e => e.id !== id));
                    closeModal();
                }
            };

            const exportData = () => {
                const data = { events, doctorSchedule };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `healthcare-calendar-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
            };

            const importData = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const data = JSON.parse(event.target.result);
                            if (data.events) setEvents(data.events);
                            if (data.doctorSchedule) setDoctorSchedule(data.doctorSchedule);
                            alert('è³‡æ–™åŒ¯å…¥æˆåŠŸï¼');
                        } catch (error) {
                            alert('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼éŒ¯èª¤');
                        }
                    };
                    reader.readAsText(file);
                }
            };

            const days = getDaysInMonth(currentMonth);

            return (
                <div className="container">
                    <div className="header">
                        <h1>ğŸ‘µ é˜¿å¬¤å¥åº·ç®¡ç†æ—¥æ›†</h1>
                        <p>Grandma's Healthcare Calendar - è¿½è¹¤é£²é£Ÿã€ç”¨è—¥ã€æª¢æŸ¥ã€æ‰‹è¡“ã€ä½é™¢èˆ‡é–€è¨º</p>
                    </div>

                    <div className="info-banner">
                        <strong>ğŸ“Œ ä½¿ç”¨èªªæ˜ï¼š</strong> é»æ“Šæ—¥æœŸå³å´çš„ã€Œ+ã€æŒ‰éˆ•æ–°å¢äº‹ä»¶ï¼Œé»æ“Šäº‹ä»¶å¯ç·¨è¼¯è©³ç´°è³‡è¨Šã€‚ä½¿ç”¨åŒ¯å‡º/åŒ¯å…¥åŠŸèƒ½ä¿å­˜æ‚¨çš„è³‡æ–™ã€‚
                    </div>

                    <div className="legend">
                        {Object.entries(EVENT_TYPES).map(([key, value]) => (
                            <div key={key} className="legend-item">
                                <div className="legend-color" style={{ background: value.color }}></div>
                                <span>{value.label}</span>
                            </div>
                        ))}
                    </div>

                    <div className="controls">
                        <input 
                            type="month" 
                            value={currentMonth} 
                            onChange={(e) => setCurrentMonth(e.target.value)}
                            className="btn"
                        />
                        <button className="btn btn-success" onClick={exportData}>ğŸ“¥ åŒ¯å‡ºè³‡æ–™</button>
                        <label className="btn btn-secondary" style={{ cursor: 'pointer' }}>
                            ğŸ“¤ åŒ¯å…¥è³‡æ–™
                            <input type="file" accept=".json" onChange={importData} style={{ display: 'none' }} />
                        </label>
                    </div>

                    <div className="calendar-grid">
                        {days.map(date => {
                            const dayEvents = getEventsForDate(date);
                            const dayNum = date.split('-')[2];
                            return (
                                <div key={date} className="calendar-day">
                                    <div className="day-header">
                                        <span>{dayNum}æ—¥</span>
                                        <button className="add-event-btn" onClick={() => openModal(date)}>+</button>
                                    </div>
                                    {dayEvents.map(event => (
                                        <div 
                                            key={event.id} 
                                            className={`event event-${event.type}`}
                                            onClick={() => openModal(date, event)}
                                        >
                                            <div className="event-type">{EVENT_TYPES[event.type].label}</div>
                                            <div className="event-title">{event.title}</div>
                                            {event.time && <div className="event-time">â° {event.time}</div>}
                                            {event.companion ? (
                                                <span className="companion-badge">ğŸ‘¤ {event.companion}</span>
                                            ) : (
                                                ['checkup', 'clinic', 'surgery', 'hospitalization'].includes(event.type) && (
                                                    <span className="companion-badge unassigned">æœªæŒ‡æ´¾é™ªåŒ</span>
                                                )
                                            )}
                                        </div>
                                    ))}
                                </div>
                            );
                        })}
                    </div>

                    <div className="doctor-schedule">
                        <h2>ğŸ¥ é†«å¸«é–€è¨ºæ™‚é–“è¡¨</h2>
                        <div className="schedule-grid">
                            <div className="schedule-cell schedule-header">æ™‚æ®µ</div>
                            <div className="schedule-cell schedule-header">é€±ä¸€</div>
                            <div className="schedule-cell schedule-header">é€±äºŒ</div>
                            <div className="schedule-cell schedule-header">é€±ä¸‰</div>
                            <div className="schedule-cell schedule-header">é€±å››</div>
                            <div className="schedule-cell schedule-header">é€±äº”</div>
                            <div className="schedule-cell schedule-header">é€±å…­</div>
                            <div className="schedule-cell schedule-header">é€±æ—¥</div>

                            <div className="schedule-cell schedule-time">ä¸Šåˆ</div>
                            {['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'].map(day => (
                                <div key={`morning-${day}`} className="schedule-cell doctor-name">
                                    {doctorSchedule.morning[day].join(' / ') || '-'}
                                </div>
                            ))}

                            <div className="schedule-cell schedule-time">ä¸‹åˆ</div>
                            {['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'].map(day => (
                                <div key={`afternoon-${day}`} className="schedule-cell doctor-name">
                                    {doctorSchedule.afternoon[day].join(' / ') || '-'}
                                </div>
                            ))}
                        </div>
                    </div>

                    {showModal && (
                        <div className="modal" onClick={closeModal}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <h2>{editingEvent.id ? 'ç·¨è¼¯äº‹ä»¶' : 'æ–°å¢äº‹ä»¶'}</h2>
                                    <button className="close-btn" onClick={closeModal}>Ã—</button>
                                </div>

                                <div className="form-group">
                                    <label>æ—¥æœŸ</label>
                                    <input 
                                        type="date" 
                                        value={editingEvent.date} 
                                        onChange={(e) => setEditingEvent({...editingEvent, date: e.target.value})}
                                    />
                                </div>

                                <div className="form-group">
                                    <label>é¡å‹</label>
                                    <select 
                                        value={editingEvent.type}
                                        onChange={(e) => setEditingEvent({...editingEvent, type: e.target.value})}
                                    >
                                        {Object.entries(EVENT_TYPES).map(([key, value]) => (
                                            <option key={key} value={key}>{value.label}</option>
                                        ))}
                                    </select>
                                </div>

                                <div className="form-group">
                                    <label>æ¨™é¡Œ / å…§å®¹</label>
                                    <input 
                                        type="text" 
                                        value={editingEvent.title}
                                        onChange={(e) => setEditingEvent({...editingEvent, title: e.target.value})}
                                        placeholder="è«‹è¼¸å…¥äº‹ä»¶æ¨™é¡Œ"
                                    />
                                </div>

                                <div className="form-group">
                                    <label>æ™‚é–“ï¼ˆé¸å¡«ï¼‰</label>
                                    <input 
                                        type="time" 
                                        value={editingEvent.time}
                                        onChange={(e) => setEditingEvent({...editingEvent, time: e.target.value})}
                                    />
                                </div>

                                {['checkup', 'clinic', 'surgery', 'hospitalization'].includes(editingEvent.type) && (
                                    <div className="form-group">
                                        <label>ğŸ‘¤ é™ªåŒäººå“¡</label>
                                        <input 
                                            type="text" 
                                            value={editingEvent.companion}
                                            onChange={(e) => setEditingEvent({...editingEvent, companion: e.target.value})}
                                            placeholder="è«‹è¼¸å…¥é™ªåŒäººå“¡å§“å"
                                        />
                                    </div>
                                )}

                                <div className="form-group">
                                    <label>ğŸ“ å‚™è¨»</label>
                                    <textarea 
                                        value={editingEvent.notes}
                                        onChange={(e) => setEditingEvent({...editingEvent, notes: e.target.value})}
                                        placeholder="è«‹è¼¸å…¥ç›¸é—œå‚™è¨»äº‹é …"
                                    />
                                </div>

                                <div className="form-group">
                                    <label>âš ï¸ æ³¨æ„äº‹é …</label>
                                    <textarea 
                                        value={editingEvent.cautions}
                                        onChange={(e) => setEditingEvent({...editingEvent, cautions: e.target.value})}
                                        placeholder="è«‹è¼¸å…¥éœ€è¦æ³¨æ„çš„äº‹é …"
                                    />
                                </div>

                                <div className="form-group">
                                    <label>ğŸ”— åƒè€ƒé€£çµ</label>
                                    <input 
                                        type="url" 
                                        value={editingEvent.reference}
                                        onChange={(e) => setEditingEvent({...editingEvent, reference: e.target.value})}
                                        placeholder="https://"
                                    />
                                </div>

                                {editingEvent.notes || editingEvent.cautions || editingEvent.reference ? (
                                    <div className="event-details">
                                        {editingEvent.notes && (
                                            <div className="detail-section">
                                                <h4>å‚™è¨»é è¦½</h4>
                                                <div className="detail-content">{editingEvent.notes}</div>
                                            </div>
                                        )}
                                        {editingEvent.cautions && (
                                            <div className="detail-section">
                                                <h4>æ³¨æ„äº‹é …é è¦½</h4>
                                                <div className="detail-content">{editingEvent.cautions}</div>
                                            </div>
                                        )}
                                        {editingEvent.reference && (
                                            <div className="detail-section">
                                                <h4>åƒè€ƒé€£çµé è¦½</h4>
                                                <div className="detail-content">
                                                    <a href={editingEvent.reference} target="_blank" rel="noopener noreferrer">
                                                        {editingEvent.reference}
                                                    </a>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                ) : null}

                                <div className="form-actions">
                                    {editingEvent.id && (
                                        <button className="btn btn-danger" onClick={() => deleteEvent(editingEvent.id)}>
                                            åˆªé™¤
                                        </button>
                                    )}
                                    <button className="btn btn-secondary" onClick={closeModal}>å–æ¶ˆ</button>
                                    <button className="btn btn-primary" onClick={saveEvent}>å„²å­˜</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
